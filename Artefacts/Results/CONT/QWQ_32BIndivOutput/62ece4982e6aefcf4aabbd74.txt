

```python
from typing import Optional, Union
from pathlib import Path, PosixPath
import shutil

def prepare_repository_from_archive(
    archive_path: str,
    filename: Optional[str] = None,
    tmp_path: Union[Path, str] = "/tmp",
) -> str:
    archive_path = Path(archive_path)
    tmp_path = Path(tmp_path)
    
    if filename is None:
        name = archive_path.stem
        while '.' in name:
            name = Path(name).stem
        base_name = name
    else:
        base_name = filename
    
    destination_dir = tmp_path / base_name
    shutil.unpack_archive(str(archive_path), extract_dir=str(destination_dir))
    
    return f"file://{destination_dir.as_posix()}"
```