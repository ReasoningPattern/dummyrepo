def on(self, hook):
    """
    Return a decorator function to add a new handler to the "hook" in the registry in the class.
    """
    def decorator(handler):
        if hook not in self.registry:
            self.registry[hook] = []
        self.registry[hook].append(handler)
        return handler
    return decorator