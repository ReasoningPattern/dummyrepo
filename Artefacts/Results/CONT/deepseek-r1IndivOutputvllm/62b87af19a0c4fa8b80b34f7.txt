

```python
def difference(d1, d2, level=-1):
    """
    Return a dictionary with items from d1 not contained in d2.
    """
    def _check(d, key, level, d2):
        if level > 0:
            if isinstance(d, dict):
                for k, v in d.items():
                    if _check(v, k, level - 1, d2):
                        return True
            elif isinstance(d, list):
                for i, item in enumerate(d):
                    if _check(item, str(i), level - 1, d2):
                        return True
        return d in d2 or d == d2.get(key, None)
    
    result = {}
    for key, value in d1.items():
        if not _check(value, key, level, d2):
            result[key] = value
    return result
```