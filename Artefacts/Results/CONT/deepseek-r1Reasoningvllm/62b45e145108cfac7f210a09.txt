Okay, so I need to generate Python code based on the given function signature and docstring. The function is called check_digests_present_and_used and it's part of a class. The docstring explains that this function checks whether all the necessary digests in the manifest are present and used. If not, it should return an error.

First, I'll look at the parameters. The function takes self, manifest_files, and digests_used. I remember that in Python, self is always the first parameter for methods, so I'll include that. The other two parameters are the manifest files and the digests used.

Next, I need to think about how to check if the digests are present and used. I guess I should start by checking if all the required digests are present in digests_used. That makes sense because if a digest is needed but not used, it's a problem.

So, I'll write a condition that iterates over each digest in the required ones. For each digest, I'll check if it's in digests_used. If any of them aren't, I'll raise an error. That way, the function ensures that all necessary digests are actually used.

I should also make sure that the function doesn't raise any exceptions unless there's an issue. So, using raise with the error message seems appropriate here.

Putting it all together, the function will:

1. Iterate over each required digest.
2. Check if it exists in digests_used.
3. If any are missing, raise an error with a message indicating which digests are missing.

I think that covers the functionality described in the docstring. Now, I'll write the code accordingly.
