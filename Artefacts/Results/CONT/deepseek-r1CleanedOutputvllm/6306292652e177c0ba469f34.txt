from typing import Optional
from urllib.parse import urlparse, parse_qs
import requests
import logging

def fetch_content_type(url: str) -> Optional[str]:
    """
    Set the head of the request through the URL and USER_AGENT.
    """
    try:
        parsed_url = urlparse(url)
        path = parsed_url.path
        params = parse_qs(parsed_url.query)
        
        headers = {}
        for key, value in params.items():
            if key == 'Content-Type':
                headers['Content-Type'] = value[0]
                return headers.get('Content-Type')
                
        # If no Content-Type found, return default
        return 'text/html'
        
    except Exception as e:
        logging.error(f"Error parsing URL: {e}")
        return None