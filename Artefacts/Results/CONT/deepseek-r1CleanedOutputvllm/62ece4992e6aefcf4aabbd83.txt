import subprocess

def run_command(commands, args, cwd=None, verbose=False, hide_stderr=False, env=None):
    combined_output = {'stdout': '', 'stderr': ''}
    for cmd in commands:
        proc = subprocess.run(
            cmd,
            args=args,
            cwd=cwd,
            env=env,
            capture_output=True,
            text=True
        )
        combined_output['stdout'] += proc.stdout
        combined_output['stderr'] += proc.stderr
        
        if verbose:
            print(proc.stdout)
        if hide_stderr and verbose:
            print(proc.stderr, flush=True)
        else:
            print(proc.stderr)
    return {
        'stdout': combined_output['stdout'],
        'stderr': combined_output['stderr'],
        'returncode': proc.returncode
    }