def _group_files_by_xml_filename(source, xmls, files):
    """
    Groups files by xmls and returns data in dict format.
    """
    grouped_files = {}
    for file_path in files:
        _, file_ext = os.path.splitext(file_path)
        if file_ext.lower() == '.xml':
            xml_name = os.path.splitext(file_path)[0]
            if xml_name not in xmls:
                xmls.append(xml_name)
            grouped_files[xml_name] = grouped_files.get(xml_name, []) + [file_path]
        else:
            if file_path not in grouped_files:
                grouped_files[file_path] = []
            grouped_files[file_path].append(file_path)
    return grouped_files