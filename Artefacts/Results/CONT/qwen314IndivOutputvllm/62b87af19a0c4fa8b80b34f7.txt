

```python
def difference(d1, d2, level=-1):
    """
    Return a dictionary with items from d1 not contained in d2.
    """
    result = {}
    for key in d1:
        if key not in d2:
            result[key] = d1[key]
        else:
            val1 = d1[key]
            val2 = d2[key]
            if level == 0:
                if val1 != val2:
                    result[key] = val1
            else:
                if isinstance(val1, dict) and isinstance(val2, dict):
                    new_level = level - 1 if level != -1 else -1
                    nested_diff = difference(val1, val2, new_level)
                    if nested_diff:
                        result[key] = nested_diff
                else:
                    if val1 != val2:
                        result[key] = val1
    return result
```