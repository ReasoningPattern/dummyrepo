import subprocess

def ansible_playbook(ir_workspace, ir_plugin, playbook_path, verbose=None, extra_vars=None, ansible_args=None):
    command = ['ansible-playbook', playbook_path]
    if verbose is not None:
        command.append('--verbose')
        command.append(str(verbose))
    
    # Add extra_vars as --extra-vars
    if extra_vars:
        command.extend(['--extra-vars', ' '.join(f'{k}={v}' for k, v in extra_vars.items())])
    
    # Add ansible_args as -- and key=value pairs
    if ansible_args:
        command.extend(['--', ' '.join(f'{k}={v}' for k, v in ansible_args.items())])
    
    # Run the command
    subprocess.run(command, check=True, env=ir_workspace.env, cwd=ir_workspace.cwd)