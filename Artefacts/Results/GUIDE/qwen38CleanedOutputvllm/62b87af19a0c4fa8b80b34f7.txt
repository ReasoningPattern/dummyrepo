def difference(d1, d2, level=-1):
    """
    Return a dictionary with items from d1 not contained in d2.
    """
    if level == -1:
        max_level = float('inf')
    else:
        max_level = level

    result = {}
    for key in d1:
        if key not in d2:
            result[key] = d1[key]
        else:
            if max_level == 0:
                if d1[key] != d2[key]:
                    result[key] = d1[key]
            else:
                sub_diff = difference(d1[key], d2[key], max_level - 1)
                if sub_diff:
                    result[key] = sub_diff
    return result