import json
import subprocess
from typing import Dict, List

def _run_playbook(cli_args: List[str], vars_dict: Dict[str, any], ir_workspace, ir_plugin):
    """
    Runs ansible cli with vars dict

    :param vars_dict: dict, Will be passed as Ansible extra-vars
    :param cli_args: the list of command line arguments
    :param ir_workspace: An Infrared Workspace object represents the active workspace
    :param ir_plugin: An InfraredPlugin object of the current plugin
    :return: ansible results
    """
    # Convert vars_dict to JSON string
    extra_vars = json.dumps(vars_dict)
    # Create a new list of arguments
    modified_args = cli_args.copy()
    modified_args.append('--extra-vars')
    modified_args.append(extra_vars)
    # Execute the ansible command
    result = subprocess.run(modified_args, capture_output=True, text=True)
    return result