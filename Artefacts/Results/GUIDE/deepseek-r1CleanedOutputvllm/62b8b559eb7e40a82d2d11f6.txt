def determine_metaclass(bases, explicit_mc=None):
    """
    Determine the metaclass based on the given bases and an optional explicit __metaclass__.
    
    Args:
        bases (tuple): The bases classes.
        explicit_mc (type, optional): The explicit __metaclass__ to use if provided.
        
    Returns:
        type: The determined metaclass.
    """
    if explicit_mc is not None:
        return explicit_mc
    for base in bases:
        if base.__metaclass__ is not None:
            return base.__metaclass__
    return type