import os

def _group_files_by_xml_filename(source, xmls, files):
    """
    Groups files by xmls and returns data in dict format.
    """
    grouped = {xml: [] for xml in xmls}
    xml_base_to_xml = {}

    for xml in xmls:
        xml_basename = os.path.basename(xml)
        base, _ = os.path.splitext(xml_basename)
        xml_base_to_xml[base] = xml

    for file in files:
        file_basename = os.path.basename(file)
        base, _ = os.path.splitext(file_basename)
        if base in xml_base_to_xml:
            xml_filename = xml_base_to_xml[base]
            grouped[xml_filename].append(file)

    return grouped