import unittest

LEEGAL_TAG_CHARS = set("abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789_")

def test_tag(tag: str) -> bool:
    """
    Checks whether each character in the tag belongs to LEEGAL_TAG_CHARS. If any character in the tag is not part of LEEGAL_TAG_CHARS, returns False. Otherwise returns True.
    """
    for c in tag:
        if c not in LEEGAL_TAG_CHARS:
            return False
    return True

class TestTag(unittest.TestCase):
    def test_valid_tag(self):
        self.assertTrue(test_tag("hello123"))
        self.assertTrue(test_tag("A_Bc"))
        self.assertTrue(test_tag("_123abc"))

    def test_invalid_character(self):
        self.assertFalse(test_tag("hello!"))
        self.assertFalse(test_tag("123$"))
        self.assertFalse(test_tag("tag#with-special"))

    def test_empty_tag(self):
        self.assertTrue(test_tag(""))

    def test_whitespace(self):
        self.assertFalse(test_tag(" "))
        self.assertFalse(test_tag("\t"))
        self.assertFalse(test_tag("\n"))

    def test_edge_cases(self):
        self.assertTrue(test_tag("a"))
        self.assertTrue(test_tag("Z9"))
        self.assertFalse(test_tag("@"))
        self.assertFalse(test_tag(""))

if __name__ == '__main__':
    unittest.main()