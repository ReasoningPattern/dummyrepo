def _get_conditionally_required_args(self, command_name, options_spec, args):
    """
    List arguments with ``required_when`` condition matched.

    :param command_name: the command name.
    :param options_spec:  the list of command spec options.
    :param args: the received input arguments
    :return: list, list of argument names with matched ``required_when``
        condition
    """
    required_args = []
    for option in options_spec:
        if 'required_when' in option:
            condition = option['required_when']
            if condition == 'always':
                required_args.append(option['name'])
            elif condition == 'never':
                continue
            elif condition == 'if' and 'command' in condition:
                if condition['command'] == command_name:
                    required_args.append(option['name'])
            elif condition == 'if' and 'arg' in condition:
                arg_name = condition['arg']
                if arg_name in args and args[arg_name]:
                    required_args.append(option['name'])
    return required_args