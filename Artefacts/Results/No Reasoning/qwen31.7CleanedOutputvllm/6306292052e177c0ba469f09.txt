from fastapi import Request

def identify_request(request: Request):
    try:
        # Check if request body is JSON and contains events
        if request.headers.get("Content-Type") == "application/json":
            # Try to load JSON body
            import json
            body = json.loads(request.body)
            if "events" in body:
                return True
        # Check if XML body has Magic_ENV_TAG
        elif request.headers.get("Content-Type") == "application/xml":
            # Try to load XML body
            import xml.etree.ElementTree as ET
            try:
                root = ET.fromstring(request.body)
                if root.tag == "Magic_ENV_TAG":
                    return True
            except ET.ParseError:
                pass
    except Exception:
        pass
    return False