

```python
import os
import traceback

def extostr(cls, e, max_level=30, max_path_level=5):
    tb = e.__traceback__
    tb_list = traceback.format_tb(tb, limit=max_level)
    processed_lines = []
    for line in tb_list:
        parts = line.split('"')
        filename = parts[1]
        path_components = filename.split(os.sep)
        if len(path_components) > max_path_level + 1:
            new_path = os.sep.join(path_components[-(max_path_level + 1):])
        else:
            new_path = filename
        new_line = f'  File "{new_path}", ' + parts[2]
        processed_lines.append(new_line)
    trace = ''.join(processed_lines)
    return f"Traceback (most recent call last):\n{trace}{type(e).__name__}: {str(e)}\n"
```