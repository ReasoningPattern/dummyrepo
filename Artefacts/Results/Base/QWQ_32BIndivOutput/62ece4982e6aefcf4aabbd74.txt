

```python
from pathlib import Path, PosixPath
from typing import Optional, Union
import shutil

def prepare_repository_from_archive(
    archive_path: str,
    filename: Optional[str] = None,
    tmp_path: Union[PosixPath, str] = "/tmp",
) -> str:
    if filename is None:
        path = Path(archive_path)
        name = path.name
        for suffix in reversed(path.suffixes):
            name = name[:-len(suffix)]
        dest_dir_name = name
    else:
        dest_dir_name = filename

    tmp_dir = Path(tmp_path)
    dest_dir = tmp_dir / dest_dir_name
    dest_dir.mkdir(parents=True, exist_ok=True)
    shutil.unpack_archive(archive_path, dest_dir)
    return f"file://{dest_dir.resolve()}"
```