def _group_files_by_xml_filename(source, xmls, files):
    """
    Groups files by xmls and returns data in dict format.
    """
    grouped_files = {}
    for xml_file, file_list in zip(xmls, files):
        xml_base = os.path.basename(xml_file)
        for file_path in file_list:
            file_base = os.path.basename(file_path)
            if file_base == xml_base:
                if xml_base not in grouped_files:
                    grouped_files[xml_base] = []
                grouped_files[xml_base].append(file_path)
    return grouped_files