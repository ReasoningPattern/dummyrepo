def dict_insert(dic, val, key, *keys):
    current = dic
    parts = key.split('.') + list(keys)
    for part in parts[:-1]:
        if part not in current or not isinstance(current[part], dict):
            current[part] = {}
        current = current[part]
    if isinstance(current, dict) and keys[-1] in current:
        current[keys[-1]][val] = val
    else:
        if isinstance(current, dict):
            current[keys[-1]] = {val: val}
        else:
            current[keys[-1]] = val