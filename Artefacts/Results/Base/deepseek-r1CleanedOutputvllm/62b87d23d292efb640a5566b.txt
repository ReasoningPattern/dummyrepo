import subprocess
import os

def run_command(commands, args, cwd=None, verbose=False, hide_stderr=False, env=None):
    """
    Call the given command(s).
    """
    for cmd in commands:
        cmd_str = f"{cmd} {'-c " + args + "''}" if args else cmd
        if cwd:
            cmd_str = f"{cwd} '>{cmd_str}"
        result = subprocess.run(
            cmd_str,
            shell=True,
            stdout=subprocess.PIPE,
            stderr=subprocess.PIPE,
            env=env,
            text=True
        )
        if result.returncode != 0:
            if verbose:
                print(f"Error: {result.stderr}")
            if not hide_stderr:
                print(result.stderr)
        yield result