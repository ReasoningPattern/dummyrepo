import traceback

def extostr(cls, e, max_level=30, max_path_level=5):
    """
    Format the exception as a string
    """
    formatted_exceptions = []
    current_exception = e
    current_traceback = current_exception.__traceback__
    level = 0
    while current_exception and level < max_path_level:
        formatted_exceptions.extend(traceback.format_exception(type(current_exception), current_exception, current_traceback))
        current_exception = current_exception.__context__
        current_traceback = current_exception.__traceback__ if current_exception else None
        level += 1
    formatted_exceptions = formatted_exceptions[:max_level]
    return '\n'.join(formatted_exceptions)