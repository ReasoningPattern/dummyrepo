

```python
import traceback
import os

def extostr(cls, e, max_level=30, max_path_level=5):
    """
    Format the exception as a string
    """
    exc_type = type(e)
    exc_value = e
    exc_traceback = e.__traceback__
    lines = traceback.format_exception(exc_type, exc_value, exc_traceback, limit=max_level)
    processed_lines = []
    for line in lines:
        if line.startswith('File '):
            file_part = line.split('File ', 1)[1]
            path_with_quotes, rest = file_part.split(', line', 1)
            path = path_with_quotes.strip().split('"')[1]
            components = path.split(os.path.sep)
            if len(components) > max_path_level:
                truncated_path = os.path.sep.join(components[-max_path_level:])
            else:
                truncated_path = path
            new_line = 'File "{}", line{}'.format(truncated_path, rest)
            processed_lines.append(new_line)
        else:
            processed_lines.append(line)
    return ''.join(processed_lines)
```