import shutil
from pathlib import Path
from typing import Optional, Union

def prepare_repository_from_archive(
    archive_path: str,
    filename: Optional[str] = None,
    tmp_path: Union[PosixPath, str] = "/tmp",
) -> str:
    tmp_dir = Path(tmp_path)
    if filename is None:
        directory_name = Path(archive_path).name
    else:
        directory_name = filename
    extract_dir = tmp_dir / directory_name
    shutil.unpack_archive(archive_path, extract_dir)
    return f"file://{extract_dir.as_posix()}"