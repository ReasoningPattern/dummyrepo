

```python
import zipfile
import tarfile

def prepare_repository_from_archive(
    archive_path: str,
    filename: Optional[str] = None,
    tmp_path: Union[PosixPath, str] = "/tmp",
) -> str:
    if filename is not None:
        extracted_dir = filename
    else:
        extracted_dir = archive_path.split('/')[-1]
    
    if archive_path.endswith('.zip'):
        with zipfile.ZipFile(archive_path, 'r') as zip_ref:
            zip_ref.extractall(tmp_path)
    elif archive_path.endswith('.tar'):
        with tarfile.open(archive_path, 'r') as tar_ref:
            tar_ref.extractall(tmp_path)
    else:
        # Handle other archive types, but this is not specified
        pass
    
    return f'git+file://{tmp_path}/{extracted_dir}'
```